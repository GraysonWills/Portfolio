<div class="work-page">
  <div class="container">
    <!-- Page Header -->
    <section class="page-header" appScrollReveal aria-label="Work experience overview">
      <h1 class="page-title">Work Experience</h1>
      <p class="page-subtitle">Professional journey and career highlights</p>
    </section>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-section" aria-label="Loading work experience">
      <div class="skeleton-section">
        <div class="skeleton-title"></div>
        <div class="skeleton-bar"></div>
      </div>
      <div class="skeleton-section">
        <div class="skeleton-title"></div>
        <div class="skeleton-timeline-item" *ngFor="let i of [1,2,3]"></div>
      </div>
    </div>

    <!-- Career Progress -->
    <section class="progress-section" *ngIf="!isLoading" appScrollReveal aria-label="Career progress">
      <h2 class="section-title">Career Momentum</h2>
      <p class="progress-intro">Snapshot of current strengths and growth tracks pulled from Redis content records.</p>
      <div class="career-progress-total">
        <span>Overall Profile Strength</span>
        <strong>{{ getCareerProgress() }}%</strong>
      </div>
      <div class="career-metrics-grid" *ngIf="careerMetrics.length > 0">
        <article class="career-metric-card" *ngFor="let metric of careerMetrics">
          <div class="metric-header">
            <h3>{{ metric.label }}</h3>
            <span class="metric-level" [ngClass]="'tone-' + getMetricTone(metric)">{{ metric.level }}</span>
          </div>
          <div class="metric-bar-track" role="progressbar" [attr.aria-valuenow]="metric.value" aria-valuemin="0" aria-valuemax="100">
            <div class="metric-bar-fill" [style.width.%]="metric.value" [ngClass]="'tone-' + getMetricTone(metric)"></div>
          </div>
          <div class="metric-footer">
            <span>{{ metric.summary }}</span>
            <strong>{{ metric.value }}%</strong>
          </div>
        </article>
      </div>
    </section>

    <!-- Timeline Section -->
    <section class="timeline-section" 
             *ngIf="!isLoading && timelineEvents.length > 0" 
             aria-label="Professional timeline" 
             appScrollReveal>
      <h2 class="section-title">Professional Timeline</h2>
      <p-timeline [value]="timelineEvents" [align]="timelineAlign" styleClass="custom-timeline">
        <ng-template let-event pTemplate="opposite">
          <div class="timeline-opposite">
            <span class="timeline-period">{{ event.period }}</span>
            <span class="timeline-location">{{ event.location }}</span>
          </div>
        </ng-template>
        <ng-template let-event pTemplate="marker">
          <span class="timeline-marker" [style.background]="event.markerColor"></span>
        </ng-template>
        <ng-template let-event pTemplate="content">
          <article class="timeline-content-card">
            <header class="timeline-card-header">
              <h3>{{ event.title }}</h3>
              <span class="current-pill" *ngIf="event.isCurrent">Current</span>
            </header>
            <p class="timeline-company">{{ event.company }} â€¢ {{ event.location }}</p>
            <ul class="timeline-description" *ngIf="event.description.length > 0">
              <li *ngFor="let detail of event.description">{{ detail }}</li>
            </ul>
            <div class="timeline-achievements" *ngIf="event.achievements.length > 0">
              <h4>Key Wins</h4>
              <ul>
                <li *ngFor="let achievement of event.achievements">{{ achievement }}</li>
              </ul>
            </div>
          </article>
        </ng-template>
      </p-timeline>
    </section>

    <!-- Skills Section -->
    <section class="skills-section" 
             *ngIf="!isLoading && topSkills.length > 0" 
             aria-label="Technical skills" 
             appScrollReveal>
      <h2 class="section-title">Technical Skills</h2>
      <div class="skills-grid" role="list" aria-label="List of technical skills">
        <p-chip 
          *ngFor="let skill of topSkills" 
          [label]="skill"
          class="skill-chip"
          role="listitem">
        </p-chip>
      </div>
    </section>

    <!-- Certifications Section -->
    <section class="certifications-section" 
             *ngIf="!isLoading && certifications.length > 0" 
             aria-label="Professional certifications"
             appScrollReveal>
      <h2 class="section-title">Certifications</h2>
      <div class="certifications-grid" role="list">
        <p-card *ngFor="let cert of certifications" class="cert-card" role="listitem">
          <div class="cert-content">
            <i class="pi pi-verified cert-icon" aria-hidden="true"></i>
            <h3>{{ cert.name }}</h3>
            <p>{{ cert.issuer }}</p>
            <p-tag *ngIf="cert.date" [value]="cert.date" severity="success"></p-tag>
          </div>
        </p-card>
      </div>
    </section>
  </div>
</div>
